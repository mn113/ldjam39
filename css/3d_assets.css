body {
	xbackground: linear-gradient(90deg, rgba(0,255,255,1) 0%, rgba(214,255,179,1) 50%, rgba(0,255,255,1) 100%);
	background: #d9a7c7; /* fallback for old browsers */
	background: -webkit-linear-gradient(to top left, #d9a7c7, #fffcdc); /* Chrome 10-25, Safari 5.1-6 */
	background: linear-gradient(to top left, #d9a7c7, #fffcdc); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
	overflow: hidden;
	font-size: 20px;	/* defines 20px = 1em */
}
#ui {
	position: relative;
	height: 100vh;
}
#world {
	font-size: 100%;
	height: calc(100vh - 7em);
	display: flex;
	align-items: center;
	justify-content: center;
	padding-top: 7em;
}
.room {
	border: 1em solid #ccc;
	border-radius: 0.5em;
    width: 15em;
    height: 15em;
    transform: scale(3) rotateX(60deg) rotateZ(45deg);
    transform-style: preserve-3d;
	perspective-origin: 50% 0%;
	perspective: 1000000px;
	position: relative;
	left: 100%;
	transition: left 1.2s, opacity 0.8s;
	opacity: 0;
}
.room.current {
	left: 0;
	opacity: 1;
}
.room > * {
	position: absolute;
}
#floor {
	width: 100%;
	height: 100%;
	background: url(../img/room0_v2.png) no-repeat;
	background-size: 15em 15em;
}
.oldexit {
	background-color: #aaa;
	width: 1em;
	height: 1em;
	text-align: center;
}
.exit .top:after {
	content: '';
	position: absolute;
	width: 100%;
	height: 100%;
	background: #aaa url(../img/sprites/spritesheet.png) -100px -100px;
	cursor: pointer;
}
.exit.west .top:after { transform: rotate(180deg); }
.exit.north .top:after { transform: rotate(90deg); }
.exit.south .top:after { transform: rotate(-90deg); }


/* ITEMS */
.cube,
.cube:after,
.cube:before {
    box-shadow: inset 0 0 0 .2em rgba(0,0,0,.1);
    content: '';
    height: 1em;
    width: 1em;
    position: absolute;
}
/* Top */
.cube {
    transform: translateZ(1em);
    transform-style: preserve-3d;
    transition: .25s;
}
/* Left face */
.cube:after {
    transform: rotateX(-90deg) translateY(1em);
    transform-origin: 100% 100%;
}
/* Right face */
.cube:before {
    transform: translateY(3em) rotateX(-90deg) rotateY(90deg) translateX(3em);
    transform-origin: 100% 0;
}

.back {
	pointer-events: none;
}
.cube .back {
	transform: rotateZ(180deg);
}




.roof,
.roof:after,
.roof2,
.roof2:after {
	content: '';
	width: 2em;
	height: 1.42em;
	position: absolute;
    transform-style: preserve-3d;
	transform-origin: 0 0 0;
}
.roof {
	transform:  rotateX(-45deg) translate3d(0,0,1.42em);
	background: indianred;
}
.roof:after {
	transform: rotateX(-90deg);
	background: crimson;
}
.roof2 {
	transform: translate3d(1em,0em,1em) rotateY(-45deg)  rotateZ(90deg);
	background: firebrick;
}
.roof2:after {
	transform: rotateX(-90deg);
	background: darkred;
}


.car {
	transform: scaleZ(0.75) scaleX(0.5) translateZ(1em);	/*TODO: don't scale this, it throws off em positioning */
}
.car:before {
	background: url(../img/camper.png) -1px -2px;
	background-size: 110% 120%;
}
.car, .car:after {
	background: #cdf;
}
.car {
	animation: 5s driveY linear infinite;
	animation-delay: 5s;
}
.car.back {
	animation: none;
}
@keyframes driveY {
	from {top: 15rem;}
	to {top: 0rem;}
}




.pyramid {
	position: absolute;
	transform-style: preserve-3d;
}
.pyramid .side {
	position: absolute;
	top: 0.5em;
	width: 0;
	height: 0;
	border-left: 0.5em solid transparent;
	border-right: 0.5em solid transparent;
	border-bottom: 1em solid #ccc;
	transform-origin: 50% 0%;
	transform-style: preserve-3d;
}
.pyramid .front {
	transform: translateZ(0.8em) rotateX(-90deg) rotateY(0deg) rotateX(-30deg);
	border-bottom-color: mediumaquamarine;
}
.pyramid .right {
	transform: translateZ(0.8em) rotateX(-90deg) rotateY(90deg) rotateX(-30deg);
	border-bottom-color: lightseagreen;
}
.pyramid .back {
	transform: translateZ(0.8em) rotateX(-90deg) rotateY(180deg) rotateX(-30deg);
	border-bottom-color: mediumaquamarine;
}
.pyramid .left {
	transform: translateZ(0.8em) rotateX(-90deg) rotateY(270deg) rotateX(-30deg);
	border-bottom-color: lightseagreen;
}
